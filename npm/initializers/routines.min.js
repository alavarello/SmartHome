var _0x4fec=['log','error','routine\x20database\x20loaded','exports','routines','routines.db','models','routine','insert','context','toDto','update','_id','name','remove','find','map','fromDto','findOne','general','paths','dbName','loading\x20routine\x20database\x20[',']...','debug','ensureIndex'];(function(_0x496c30,_0x4f32cf){var _0x168fbb=function(_0x26a112){while(--_0x26a112){_0x496c30['push'](_0x496c30['shift']());}};_0x168fbb(++_0x4f32cf);}(_0x4fec,0x107));var _0xc4fe=function(_0x18aaaf,_0x385db6){_0x18aaaf=_0x18aaaf-0x0;var _0x52d892=_0x4fec[_0x18aaaf];return _0x52d892;};'use strict';var Datastore=require('nedb');var Path=require('path');module[_0xc4fe('0x0')]={'initialize':function(_0x555f79,_0x4d28fd){_0x555f79[_0xc4fe('0x1')]={'dbName':_0xc4fe('0x2'),'create':function(_0xaf7321){return new Promise((_0x450e96,_0x5ce7a4)=>{var _0x51249d=_0x555f79[_0xc4fe('0x3')][_0xc4fe('0x4')]['toDto'](_0xaf7321);_0x555f79['db'][_0xc4fe('0x1')][_0xc4fe('0x5')](_0x51249d,(_0x210eb8,_0xb344b5)=>{if(_0x210eb8){_0x210eb8[_0xc4fe('0x6')]={'entity':{'type':_0xc4fe('0x4'),'id':_0x51249d['name']}};_0x5ce7a4(_0x210eb8);}else{_0x450e96(_0x555f79[_0xc4fe('0x3')]['routine']['fromDto'](_0xb344b5));}});});},'update':function(_0x1350bb){return new Promise((_0x5815d1,_0x31f5e3)=>{var _0x4c8b61=_0x555f79[_0xc4fe('0x3')][_0xc4fe('0x4')][_0xc4fe('0x7')](_0x1350bb);_0x555f79['db'][_0xc4fe('0x1')][_0xc4fe('0x8')]({'_id':_0x4c8b61[_0xc4fe('0x9')]},_0x4c8b61,{},(_0x488229,_0xac90a3)=>{if(_0x488229){_0x488229[_0xc4fe('0x6')]={'entity':{'type':_0xc4fe('0x4'),'id':_0x4c8b61[_0xc4fe('0xa')]}};_0x31f5e3(_0x488229);}else{_0x5815d1(_0xac90a3==0x1);}});});},'delete':function(_0x5045db){return new Promise((_0x4a7cc3,_0x14c928)=>{_0x555f79['db'][_0xc4fe('0x1')][_0xc4fe('0xb')]({'_id':_0x5045db},{},(_0x481cd9,_0x4e8448)=>{if(_0x481cd9){_0x14c928(_0x481cd9);}else{_0x4a7cc3(_0x4e8448==0x1);}});});},'retrieveAll':function(){return new Promise((_0x44b8b2,_0x21b09d)=>{_0x555f79['db'][_0xc4fe('0x1')][_0xc4fe('0xc')]({},(_0x512610,_0x343797)=>{if(_0x512610){_0x21b09d(_0x512610);}else{var _0x2f6039=_0x343797[_0xc4fe('0xd')](_0x1506b9=>{return _0x555f79[_0xc4fe('0x3')][_0xc4fe('0x4')][_0xc4fe('0xe')](_0x1506b9);});_0x44b8b2(_0x2f6039);}});});},'retrieveById':function(_0x3d11d8){return new Promise((_0x20dd04,_0x4a1139)=>{_0x555f79['db'][_0xc4fe('0x1')][_0xc4fe('0xf')]({'_id':_0x3d11d8},(_0x2c74fe,_0x3ce9ce)=>{if(_0x2c74fe){_0x4a1139(_0x2c74fe);}else{_0x20dd04(_0x555f79[_0xc4fe('0x3')][_0xc4fe('0x4')]['fromDto'](_0x3ce9ce));}});});}};return _0x4d28fd();},'start':function(_0x257cd6,_0x245387){var _0x1397a9=Path['join'](_0x257cd6['config'][_0xc4fe('0x10')][_0xc4fe('0x11')]['db'][0x0],_0x257cd6[_0xc4fe('0x1')][_0xc4fe('0x12')]);_0x257cd6['log'](_0xc4fe('0x13')+_0x1397a9+_0xc4fe('0x14'),_0xc4fe('0x15'));_0x257cd6['db']=_0x257cd6['db']||{};_0x257cd6['db']['routines']=new Datastore({'filename':_0x1397a9,'autoload':!![]});_0x257cd6['db'][_0xc4fe('0x1')][_0xc4fe('0x16')]({'fieldName':_0xc4fe('0xa'),'unique':!![]},_0x3fb5c1=>{if(_0x3fb5c1)_0x257cd6[_0xc4fe('0x17')](_0x3fb5c1,_0xc4fe('0x18'));});_0x257cd6[_0xc4fe('0x17')](_0xc4fe('0x19'),'info');return _0x245387();}};